{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/cadastro_intervencao.css' %}">
{% endblock head %}

{% block body %}
<div class="container">

    <!-- Painel esquerdo: formul√°rio -->
    <div class="left-panel">
        <h2>Cadastro de Interven√ß√µes</h2>

        <form method="POST">
            {% csrf_token %}
            <label for="id_descricao">Descri√ß√£o da Interven√ß√£o</label>
            <input type="text" name="descricao" id="id_descricao" required>

            <button type="submit">Cadastrar</button>
        </form>
    </div>

    <!-- Painel direito: tabela de interven√ß√µes -->
    <div class="right-panel">
        <h2>Interven√ß√µes Cadastradas</h2>
        {% if intervencoes %}
        <table class="client-table">
            <thead>
                <tr>
                    <th>C√≥digo</th>
                    <th>Descri√ß√£o</th>
                    <th>Excluir</th>
                </tr>
            </thead>
            <tbody>
                {% for intervencao in intervencoes %}
                <tr>
                    <td>{{ intervencao.cod_intervencao }}</td>
                    <td>{{ intervencao.descricao }}</td>
                    <td>
                        <a href="#" class="delete-btn" data-id="{{ intervencao.pk }}" data-nome="{{ intervencao.descricao }}">üóëÔ∏è</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>Nenhuma interven√ß√£o cadastrada.</p>
        {% endif %}
    </div>

</div>

<!-- Modal de exclus√£o -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <p>Tem certeza que deseja excluir: <strong id="modalNome"></strong>?</p>
        <form id="deleteForm" method="POST">
            {% csrf_token %}
            <button type="submit" class="confirm-btn">Sim, excluir</button>
            <button type="button" class="cancel-btn">Cancelar</button>
        </form>
    </div>
</div>

<script src="{% static 'js/cadastro_intervencoes.js' %}"></script>

{% endblock %}
